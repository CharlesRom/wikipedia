!function(a){function b(b){function c(a){Bb=a}function d(){vb=!0}function e(){vb=!1,eb()}function f(a){xb=a}function g(a){jb=a}function h(a){a=a||0;for(var b,c=a,d=pb.length;d>c;c++){if(b=pb[c][ob],void 0===b)throw"Each data element must implement a unique 'id' property";rb[b]=c}}function i(){for(var a,b=0,c=pb.length;c>b;b++)if(a=pb[b][ob],void 0===a||rb[a]!==b)throw"Each data element must implement a unique 'id' property"}function j(){return pb}function k(a,b){void 0!==b&&(ob=b),pb=zb=a,rb={},h(),i(),eb()}function l(a){void 0!=a.pageSize&&(Hb=a.pageSize,Ib=Hb?Math.min(Ib,Math.max(0,Math.ceil(Jb/Hb)-1)):0),void 0!=a.pageNum&&(Ib=Math.min(a.pageNum,Math.max(0,Math.ceil(Jb/Hb)-1))),Mb.notify(m(),null,mb),eb()}function m(){var a=Hb?Math.max(1,Math.ceil(Jb/Hb)):1;return{pageSize:Hb,pageNum:Ib,totalRows:Jb,totalPages:a}}function n(a,b){wb=b,ib=a,hb=null,b===!1&&pb.reverse(),pb.sort(a),b===!1&&pb.reverse(),rb={},h(),eb()}function o(a,b){wb=b,ib=a,hb=null,b===!1&&pb.reverse(),pb=_.sortBy(pb,a),b===!1&&pb.reverse(),rb={},h(),eb()}function p(a,b){wb=b,hb=a,ib=null;var c=Object.prototype.toString;Object.prototype.toString="function"==typeof a?a:function(){return this[a]},b===!1&&pb.reverse(),pb.sort(),Object.prototype.toString=c,b===!1&&pb.reverse(),rb={},h(),eb()}function q(){ib?n(ib,wb):hb&&p(hb,wb)}function r(a){tb=a,b.inlineFilters&&(kb=Y(),lb=Z()),eb()}function s(){return Db}function t(c){b.groupItemMetadataProvider||(b.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider),Eb=[],Fb=[],c=c||[],Db=Array.isArray(c)?c:[c];for(var d=0;d<Db.length;d++){var e=Db[d]=a.extend(!0,{},Cb,Db[d]);e.getterIsAFn="function"==typeof e.getter,e.compiledAccumulators=[];for(var f=e.aggregators.length;f--;)e.compiledAccumulators[f]=X(e.aggregators[f]);Fb[d]={}}eb()}function u(a,b,c){return null==a?void t([]):void t({getter:a,formatter:b,comparer:c})}function v(a,b){if(!Db.length)throw new Error("At least one grouping must be specified before calling setAggregators().");Db[0].aggregators=a,Db[0].aggregateCollapsed=b,t(Db)}function w(a){return pb[a]}function x(a){return rb[a]}function y(){if(!sb){sb={};for(var a=0,b=qb.length;b>a;a++)sb[qb[a][ob]]=a}}function z(a){return y(),sb[a]}function A(a){return pb[rb[a]]}function B(a){var b=[];y();for(var c=0;c<a.length;c++){var d=sb[a[c]];null!=d&&(b[b.length]=d)}return b}function C(a){for(var b=[],c=0;c<a.length;c++)a[c]<qb.length&&(b[b.length]=qb[a[c]][ob]);return b}function D(a,b){if(void 0===rb[a]||a!==b[ob])throw"Invalid or non-matching id";pb[rb[a]]=b,ub||(ub={}),ub[a]=!0,eb()}function E(a,b){pb.splice(a,0,b),h(a),eb()}function F(a){pb.push(a),h(pb.length-1),eb()}function G(a){var b=rb[a];if(void 0===b)throw"Invalid id";delete rb[a],pb.splice(b,1),h(b),eb()}function H(){return qb.length}function I(a){return qb[a]}function J(a){var c=qb[a];return void 0===c?null:c.__group?b.groupItemMetadataProvider.getGroupRowMetadata(c):c.__groupTotals?b.groupItemMetadataProvider.getTotalsRowMetadata(c):null}function K(a,b){if(null==a)for(var c=0;c<Db.length;c++)Fb[c]={},Db[c].collapsed=b;else Fb[a]={},Db[a].collapsed=b;eb()}function L(a){K(a,!0)}function M(a){K(a,!1)}function N(a,b,c){Fb[a][b]=Db[a].collapsed^c,eb()}function O(){var a=Array.prototype.slice.call(arguments),b=a[0];1==a.length&&-1!=b.indexOf(Gb)?N(b.split(Gb).length-1,b,!0):N(a.length-1,a.join(Gb),!0)}function P(){var a=Array.prototype.slice.call(arguments),b=a[0];1==a.length&&-1!=b.indexOf(Gb)?N(b.split(Gb).length-1,b,!1):N(a.length-1,a.join(Gb),!1)}function Q(){return Eb}function R(a,b){for(var c,d,e,f=[],g=[],h=b?b.level+1:0,i=Db[h],j=0,k=i.predefinedValues.length;k>j;j++)d=i.predefinedValues[j],c=g[d],c||(c=new Slick.Group,c.value=d,c.level=h,c.groupingKey=(b?b.groupingKey+Gb:"")+d,f[f.length]=c,g[d]=c);for(var j=0,k=a.length;k>j;j++)e=a[j],d=i.getterIsAFn?i.getter(e):e[i.getter],c=g[d],c||(c=new Slick.Group,c.value=d,c.level=h,c.groupingKey=(b?b.groupingKey+Gb:"")+d,f[f.length]=c,g[d]=c),c.rows[c.count++]=e;if(h<Db.length-1)for(var j=0;j<f.length;j++)c=f[j],c.groups=R(c.rows,c);return f.sort(Db[h].comparer),f}function S(a){for(var b,c=Db[a.level],d=a.level==Db.length,e=new Slick.GroupTotals,f=c.aggregators.length;f--;)b=c.aggregators[f],b.init(),c.compiledAccumulators[f].call(b,!d&&c.aggregateChildGroups?a.groups:a.rows),b.storeResult(e);e.group=a,a.totals=e}function T(a,b){b=b||0;for(var c,d=Db[b],e=a.length;e--;)c=a[e],(!c.collapsed||d.aggregateCollapsed)&&(c.groups&&T(c.groups,b+1),d.aggregators.length&&(d.aggregateEmpty||c.rows.length||c.groups&&c.groups.length)&&S(c))}function U(a,b){b=b||0;for(var c,d=Db[b],e=d.collapsed,f=Fb[b],g=a.length;g--;)c=a[g],c.collapsed=e^f[c.groupingKey],c.title=d.formatter?d.formatter(c):c.value,c.groups&&(U(c.groups,b+1),c.rows=[])}function V(a,b){b=b||0;for(var c,d,e=Db[b],f=[],g=0,h=0,i=a.length;i>h;h++){if(d=a[h],f[g++]=d,!d.collapsed){c=d.groups?V(d.groups,b+1):d.rows;for(var j=0,k=c.length;k>j;j++)f[g++]=c[j]}d.totals&&e.displayTotalsRow&&(!d.collapsed||e.aggregateCollapsed)&&(f[g++]=d.totals)}return f}function W(a){var b=/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/,c=a.toString().match(b);return{params:c[1].split(","),body:c[2]}}function X(a){var b=W(a.accumulate),c=new Function("_items","for (var "+b.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+b.params[0]+" = _items[_i]; "+b.body+"}");return c.displayName=c.name="compiledAccumulatorLoop",c}function Y(){var a=W(tb),b=a.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _retval[_idx++] = $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),c=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");c=c.replace(/\$filter\$/gi,b),c=c.replace(/\$item\$/gi,a.params[0]),c=c.replace(/\$args\$/gi,a.params[1]);var d=new Function("_items,_args",c);return d.displayName=d.name="compiledFilter",d}function Z(){var a=W(tb),b=a.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),c=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");c=c.replace(/\$filter\$/gi,b),c=c.replace(/\$item\$/gi,a.params[0]),c=c.replace(/\$args\$/gi,a.params[1]);var d=new Function("_items,_args,_cache",c);return d.displayName=d.name="compiledFilterWithCaching",d}function $(a,b){for(var c=[],d=0,e=0,f=a.length;f>e;e++)tb(a[e],b)&&(c[d++]=a[e]);return c}function ab(a,b,c){for(var d,e=[],f=0,g=0,h=a.length;h>g;g++)d=a[g],c[g]?e[f++]=d:tb(d,b)&&(e[f++]=d,c[g]=!0);return e}function bb(a){if(tb){var c=b.inlineFilters?kb:$,d=b.inlineFilters?lb:ab;xb.isFilterNarrowing?zb=c(zb,jb):xb.isFilterExpanding?zb=d(a,jb,Ab):xb.isFilterUnchanged||(zb=c(a,jb))}else zb=Hb?a:a.concat();var e;return Hb?(zb.length<Ib*Hb&&(Ib=Math.floor(zb.length/Hb)),e=zb.slice(Hb*Ib,Hb*Ib+Hb)):e=zb,{totalRows:zb.length,rows:e}}function cb(a,b){var c,d,e,f=[],g=0,h=b.length;xb&&xb.ignoreDiffsBefore&&(g=Math.max(0,Math.min(b.length,xb.ignoreDiffsBefore))),xb&&xb.ignoreDiffsAfter&&(h=Math.min(b.length,Math.max(0,xb.ignoreDiffsAfter)));for(var i=g,j=a.length;h>i;i++)i>=j?f[f.length]=i:(c=b[i],d=a[i],(Db.length&&(e=c.__nonDataRow||d.__nonDataRow)&&c.__group!==d.__group||c.__group&&!c.equals(d)||e&&(c.__groupTotals||d.__groupTotals)||c[ob]!=d[ob]||ub&&ub[c[ob]])&&(f[f.length]=i));return f}function db(a){sb=null,(xb.isFilterNarrowing!=yb.isFilterNarrowing||xb.isFilterExpanding!=yb.isFilterExpanding)&&(Ab=[]);var b=bb(a);Jb=b.totalRows;var c=b.rows;Eb=[],Db.length&&(Eb=R(c),Eb.length&&(T(Eb),U(Eb),c=V(Eb)));var d=cb(qb,c);return qb=c,d}function eb(){if(!vb){var a=qb.length,b=Jb,c=db(pb,tb);Hb&&Ib*Hb>Jb&&(Ib=Math.max(0,Math.ceil(Jb/Hb)-1),c=db(pb,tb)),ub=null,yb=xb,xb={},b!=Jb&&Mb.notify(m(),null,mb),a!=qb.length&&Kb.notify({previous:a,current:qb.length},null,mb),c.length>0&&Lb.notify({rows:c},null,mb)}}function fb(a,b){function c(){if(f.length>0){d=!0;var c=e.mapIdsToRows(f);b||(f=e.mapRowsToIds(c)),a.setSelectedRows(c),d=!1}}var d,e=this,f=e.mapRowsToIds(a.getSelectedRows());a.onSelectedRowsChanged.subscribe(function(){d||(f=e.mapRowsToIds(a.getSelectedRows()))}),this.onRowsChanged.subscribe(c),this.onRowCountChanged.subscribe(c)}function gb(a,b){function c(a){e={};for(var b in a){var c=qb[b][ob];e[c]=a[b]}}function d(){if(e){f=!0,y();var c={};for(var d in e){var g=sb[d];void 0!=g&&(c[g]=e[d])}a.setCellCssStyles(b,c),f=!1}}var e,f;c(a.getCellCssStyles(b)),a.onCellCssStylesChanged.subscribe(function(a,d){f||b==d.key&&d.hash&&c(d.hash)}),this.onRowsChanged.subscribe(d),this.onRowCountChanged.subscribe(d)}var hb,ib,jb,kb,lb,mb=this,nb={groupItemMetadataProvider:null,inlineFilters:!1},ob="id",pb=[],qb=[],rb={},sb=null,tb=null,ub=null,vb=!1,wb=!0,xb={},yb={},zb=[],Ab=[],Bb=null,Cb={getter:null,formatter:null,comparer:function(a,b){return a.value-b.value},predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0},Db=[],Eb=[],Fb=[],Gb=":|:",Hb=0,Ib=0,Jb=0,Kb=new Slick.Event,Lb=new Slick.Event,Mb=new Slick.Event;b=a.extend(!0,{},nb,b),a.extend(this,{setModule:c,beginUpdate:d,endUpdate:e,setPagingOptions:l,getPagingInfo:m,getItems:j,setItems:k,setFilter:r,sort:n,sortBy:o,fastSort:p,reSort:q,setGrouping:t,getGrouping:s,groupBy:u,setAggregators:v,collapseAllGroups:L,expandAllGroups:M,collapseGroup:O,expandGroup:P,getGroups:Q,getIdxById:x,getRowById:z,getItemById:A,getItemByIdx:w,mapRowsToIds:C,mapIdsToRows:B,setRefreshHints:f,setFilterArgs:g,refresh:eb,updateItem:D,insertItem:E,addItem:F,deleteItem:G,syncGridSelection:fb,syncGridCellCssStyles:gb,getLength:H,getItem:I,getItemMetadata:J,onRowCountChanged:Kb,onRowsChanged:Lb,onPagingInfoChanged:Mb})}function c(a){this.field_=a,this.init=function(){this.count_=0,this.nonNullCount_=0,this.sum_=0},this.accumulate=function(a){var b=a[this.field_];this.count_++,null!=b&&""!==b&&0/0!==b&&(this.nonNullCount_++,this.sum_+=parseFloat(b))},this.storeResult=function(a){a.avg||(a.avg={}),0!=this.nonNullCount_&&(a.avg[this.field_]=this.sum_/this.nonNullCount_)}}function d(a){this.field_=a,this.init=function(){this.min_=null},this.accumulate=function(a){var b=a[this.field_];null!=b&&""!==b&&0/0!==b&&(null==this.min_||b<this.min_)&&(this.min_=b)},this.storeResult=function(a){a.min||(a.min={}),a.min[this.field_]=this.min_}}function e(a){this.field_=a,this.init=function(){this.max_=null},this.accumulate=function(a){var b=a[this.field_];null!=b&&""!==b&&0/0!==b&&(null==this.max_||b>this.max_)&&(this.max_=b)},this.storeResult=function(a){a.max||(a.max={}),a.max[this.field_]=this.max_}}function f(a){this.field_=a,this.init=function(){this.sum_=null},this.accumulate=function(a){var b=a[this.field_];null!=b&&""!==b&&0/0!==b&&(this.sum_+=parseFloat(b))},this.storeResult=function(a){a.sum||(a.sum={}),a.sum[this.field_]=this.sum_}}a.extend(!0,window,{Slick:{Data:{DataView:b,Aggregators:{Avg:c,Min:d,Max:e,Sum:f}}}})}(jQuery),define(["src/util/util","lodash","components/spectrum/spectrum","jquery"],function(a,b){function c(a,b){a[b.module.view.idPropertyName]||Object.defineProperty(a,b.module.view.idPropertyName,{value:"id_"+b.module.view.getNextIncrementalId(),enumerable:!1,writable:!1,configurable:!1})}function d(){if(this.args.column.validator){var a=this.args.column.validator(this.serializeValue());if(!a.valid)return a}return{valid:!0,msg:null}}function e(){return!(""==this.$input.val()&&null==this.defaultValue)&&this.$input.val()!=this.defaultValue}function f(a,d){var e=b.isEmpty(a);DataObject.check(a,!0);var f=d;if(e){var g={};return c(g,this.args.grid),g=DataObject.check(g,!0),g.setChildSync(this.args.column.jpath,d),this.args.grid.module.view.slick.data.addItem(g),f}this.args.grid.module.model.dataSetChildSync(a,this.args.column.jpath,f)}function g(){return this.$input.val()}function h(a){this.defaultValue=a.getChildSync(this.args.column.jpath),this.defaultValue=this.defaultValue?this.defaultValue.get()||"":"",this.$input.val(this.defaultValue),this.$input[0].defaultValue=this.defaultValue,this.$input.select()}function i(a){this.$input.val(a)}function j(){return this.$input.val()}function k(){this.$input=$("<INPUT type=text class='editor-text' />").appendTo(this.args.container).bind("keydown.nav",function(a){(a.keyCode===$.ui.keyCode.LEFT||a.keyCode===$.ui.keyCode.RIGHT)&&a.stopImmediatePropagation()}).focus().select()}function l(){this.$input.remove()}function m(){this.$input.focus()}function n(){return+this.$input.val()}function o(a,c){return c=+c,f.call(this,a,b.isNaN(c)?"NaN":c)}function p(){var a=this;this.$input=$("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>"),this.$input.appendTo(this.args.container),this.$input.focus(),this.$input.change(function(){a.args.commitChanges("next")})}function q(a){this.defaultValue=a.getChildSync(this.args.column.jpath),this.defaultValue.get()?this.$input.attr("checked","checked"):this.$input.removeAttr("checked")}function r(){return!!this.$input.attr("checked")}function s(){return this.serializeValue!==this.defaultValue}function t(a,b){b=!!b,f.call(this,a,b)}a.loadCss("./components/spectrum/spectrum.css"),function(a){function u(d){this.args=d;var e,f,g;this.init=function(){var b=this;e=a("<div/>"),e.append('<input type="text">'),f=e.find("input"),f.appendTo(d.container).bind("keydown.nav",function(b){(b.keyCode===a.ui.keyCode.LEFT||b.keyCode===a.ui.keyCode.RIGHT)&&b.stopImmediatePropagation()}).focus().select(),f.spectrum({color:f.val(),preferredFormat:"hex",change:function(){b.changed=!0,f.spectrum("hide"),d.commitChanges("next")},move:function(){},show:function(){},hide:function(){console.log("hide"),b.changed||d.cancelChanges()},localStorageKey:"visualizer-spectrum",showPalette:!0,showSelectionPalette:!0,palette:[]}),f.next().first().click()},this.destroy=function(){e.remove()},this.focus=function(){f.focus()},this.getValue=function(){f.val()},this.setValue=function(a){f.val(a)},this.loadValue=function(a){g=a.getChildSync(d.column.jpath),g=g?g.value||"#000000":"#000000",f.val(g),f.spectrum("set",g),f[0].defaultValue=g,f.select()},this.serializeValue=function(){return f.val()},this.applyValue=function(a,e){var f=b.isEmpty(a);DataObject.check(a,!0);var g={type:"color",value:e};if(f){var h={};return c(h,this.args.grid),h=DataObject.check(h,!0),h.setChildSync(d.column.jpath,g),d.grid.module.view.slick.data.addItem(h),g}d.grid.module.model.dataSetChildSync(a,d.column.jpath,g)},this.isValueChanged=function(){return!(""==f.val()&&null==g)&&f.val()!=g},this.validate=function(){if(d.column.validator){var a=d.column.validator(f.val());if(!a.valid)return a}return{valid:!0,msg:null}},this.init()}function v(a){this.args=a,this.init=k,this.destroy=l,this.focus=m,this.getValue=j,this.setValue=i,this.loadValue=h,this.serializeValue=g,this.isValueChanged=e,this.validate=d,this.applyValue=function(a,d){var e=b.isEmpty(a);DataObject.check(a,!0);var f={type:this.args.column.dataType,value:d};if(e){var g={};return c(g,this.args.grid),g=DataObject.check(g,!0),g.setChildSync(this.args.column.jpath,f),this.args.grid.module.view.slick.data.addItem(g),f}this.args.grid.module.model.dataSetChildSync(a,this.args.column.jpath,f)},this.init()}function w(a){this.args=a,this.init=k,this.destroy=l,this.focus=m,this.getValue=j,this.setValue=i,this.loadValue=h,this.serializeValue=g,this.applyValue=f,this.isValueChanged=e,this.validate=d,this.init()}function x(a){this.args=a,this.init=k,this.destroy=l,this.focus=m,this.getValue=n,this.setValue=i,this.loadValue=h,this.serializeValue=g,this.applyValue=o,this.isValueChanged=e,this.validate=d,this.init()}function y(a){this.args=a,this.init=p,this.destroy=l,this.focus=m,this.getValue=n,this.setValue=i,this.loadValue=q,this.serializeValue=r,this.applyValue=t,this.isValueChanged=s,this.validate=d,this.init()}a.extend(!0,window,{Slick:{Editors:{TextValue:v,ColorValue:u,Text:v,SpecialNativeObject:w,DataNumberEditor:x,DataBooleanEditor:y}}})}(jQuery)}),function(a){function b(b){function c(a,c,d,e,f){if(!b.enableExpandCollapse)return f.title;var g=15*f.level+"px";return"<span class='"+b.toggleCssClass+" "+(f.collapsed?b.toggleCollapsedCssClass:b.toggleExpandedCssClass)+"' style='margin-left:"+g+"'></span><span class='"+b.groupTitleCssClass+"' level='"+f.level+"'>"+f.title+"</span>"}function d(a,b,c,d,e){return d.groupTotalsFormatter&&d.groupTotalsFormatter(e,d)||""}function e(a){k=a,k.onClick.subscribe(g),k.onKeyDown.subscribe(h)}function f(){k&&(k.onClick.unsubscribe(g),k.onKeyDown.unsubscribe(h))}function g(c,d){var e=this,f=this.getDataItem(d.row);f&&f instanceof Slick.Group&&a(c.target).hasClass(b.toggleCssClass)&&(d.item=f,f.collapsed?(this.getData().expandGroup(f.groupingKey),m.notify(d,c,e)):(this.getData().collapseGroup(f.groupingKey),n.notify(d,c,e)),c.stopImmediatePropagation(),c.preventDefault())}function h(c,d){var e=this;if(b.enableExpandCollapse&&c.which==a.ui.keyCode.SPACE){var f=this.getActiveCell();if(f){var g=this.getDataItem(f.row);g&&g instanceof Slick.Group&&(d.item=g,g.collapsed?(this.getData().expandGroup(g.groupingKey),m.notify(d,c,e)):(this.getData().collapseGroup(g.groupingKey),n.notify(d,c,e)),c.stopImmediatePropagation(),c.preventDefault())}}}function i(){return{selectable:!1,focusable:b.groupFocusable,cssClasses:b.groupCssClass,columns:{0:{colspan:"*",formatter:c,editor:null}}}}function j(){return{selectable:!1,focusable:b.totalsFocusable,cssClasses:b.totalsCssClass,formatter:d,editor:null}}var k,l={groupCssClass:"slick-group",groupTitleCssClass:"slick-group-title",totalsCssClass:"slick-group-totals",groupFocusable:!0,totalsFocusable:!1,toggleCssClass:"slick-group-toggle",toggleExpandedCssClass:"expanded",toggleCollapsedCssClass:"collapsed",enableExpandCollapse:!0};b=a.extend(!0,{},l,b);var m=new Slick.Event,n=new Slick.Event;return{init:e,destroy:f,getGroupRowMetadata:i,getTotalsRowMetadata:j,onGroupExpanded:m,onGroupCollapsed:n}}a.extend(!0,window,{Slick:{Data:{GroupItemMetadataProvider:b}}})}(jQuery);