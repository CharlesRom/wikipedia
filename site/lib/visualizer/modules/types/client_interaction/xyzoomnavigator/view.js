define(["modules/default/defaultview","src/util/util","jquery"],function(a,b,c){function d(){}return d.prototype=c.extend(!0,{},a,{init:function(){this.dom=c("<div />");var a=this,b=c('<div class="ci-navigation-navigarrow"></div>');this.domNavig=c("<div />").addClass("ci-navigation-navig").append(b.clone().addClass("top")).append(b.clone().addClass("left")).append(b.clone().addClass("right")).append(b.clone().addClass("bottom")).on("mousedown",".ci-navigation-navigarrow",function(b){a.moveStart(b)}),this.domZoom=c('<div class="ci-navigation-navigzoom"></div>'),this._zoomWidget=this.domZoom.slider({height:100,orientation:"vertical",min:0,step:.01,max:1,value:.5,slide:function(b,c){a.zoom(c.value)}}),this.dom.append(this.domNavig).append(this.domZoom),this.module.getDomContent().html(this.dom),this.cx=0,this.cy=0,this.step=2;var a=this},inDom:function(){this.resolveReady()},update:{xycoords:function(a){a&&(this.cx=a[0],this.cy=a[1])},zoom:function(a){a&&(this._zoom=a,this._zoomWidget.hasClass("ui-slider")&&this._zoomWidget.slider("value",this._zoom))}},zoom:function(a){this.module.controller.zoom(a)},moveStart:function(a){var b=Date.now(),d=this,e=c(a.target||a.srcElement);mode=e.hasClass("top")?"top":e.hasClass("bottom")?"bottom":e.hasClass("left")?"left":e.hasClass("right")?"right":"top";var f,d=this,g=function(){return 3e5/(Date.now()-b+1500)+10},h=function(){"top"==mode?d.cy-=d.step:"bottom"==mode?d.cy+=d.step:"left"==mode?d.cx-=d.step:"right"==mode&&(d.cx+=d.step),d.module.controller.move(d.cx,d.cy),i()},i=function(){f=window.setTimeout(h,g())},j=function(){window.clearTimeout(f),c(document).unbind("mouseup",j)};c(document).bind("mouseup",j),h()},onActionReceive:{changeXY:function(a){this.cx=parseFloat(a)}}}),d});