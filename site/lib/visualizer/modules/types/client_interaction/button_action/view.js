define(["modules/default/defaultview","forms/button","src/util/ui"],function(a,b,c){function d(){}return d.prototype=$.extend(!0,{},a,{init:function(){var a,d=this;this.dom=$("<div></div>");var e=this.module.getConfiguration("toggle");a=this.module.getConfiguration("toggle"===e?"offLabel":"label");var f=this,g=new b(a,function(a,b){var h=Promise.resolve(!0);d.module.getConfigurationCheckbox("askConfirm","yes")&&(h=c.confirm(d.module.getConfiguration("confirmText"),d.module.getConfiguration("okLabel"),d.module.getConfiguration("cancelLabel"))),h.then(function(a){a&&(b||"toggle"!==e?"toggle"===e&&(g.setTitle(d.module.getConfiguration("onLabel")),d.setButtonColor(d.module.getConfiguration("onColor"))):(g.setTitle(d.module.getConfiguration("offLabel")),d.setButtonColor(d.module.getConfiguration("offColor"))),f.module.controller.onClick(b))})},{color:"Grey",disabled:!1,checkbox:"click"!==this.module.getConfiguration("toggle")});this.module.getDomContent().html(this.dom),this.dom.html(g.render()),this.button=g,"toggle"===e&&d.setButtonColor(d.module.getConfiguration("offColor")),this.resolveReady()},setButtonColor:function(a){a="rgba("+a.join(",")+")",this.button.setColorCss(a)}}),d});