define(["jquery","src/util/ui","src/header/components/default","./couchshare/share","forms/button","src/util/util"],function(a,b,c,d,e,f){function g(){}return f.inherits(g,c,{initImpl:function(){this.dialogOptions={title:"Share view",width:550,height:170}},_onClick:function(){var c=this,g=f.getNextUniqueId(),h=a("<div>").html("<h3>Click the share button to make a snapshot of your view and generate a tiny URL</h3><br>").append(new e("Share",function(){var b=this;this.options.disabled||d.share(c.options).done(function(c){a("#"+g).val(c).focus().select(),b.disable()}).fail(function(){a("#"+g).val("error")})},{color:"blue"}).render()).append(a('<input type="text" id="'+g+'" />').css("width","400px"));b.dialog(h,this.dialogOptions)}}),g});