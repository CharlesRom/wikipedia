define(["components/twig.js/twig.min","src/util/typerenderer","src/util/util"],function(a,b,c){return a.extend(function(a){a.Template.prototype.renderAsync=function(){var a=this.promises=[];return{render:function(){Promise.all(a).then(function(a){for(var b,c=0,d=a.length;d>c;c++)b=a[c],$("#"+b.id).html(b.html),b.def.build&&b.def.build()})},html:this.render.apply(this,arguments)}}}),a.extendFunction("rendertype",function(a,d,e){if(a){"string"==typeof d&&(e=d,d={}),e&&(a=new DataObject({type:e,value:a}));var f=c.getNextUniqueId();return this.promises.push(new Promise(function(c){var e=b.toScreen(a,{},d);e.always(function(a){c({html:a,def:e,id:f})})})),'<div id="'+f+'" style="height:100%; width:100%"></div>'}}),a.extendFunction("toJSON",function(a,b){return b=b||2,"<pre><code>"+JSON.stringify(a,null,b)+"</code></pre>"}),a.extendFunction("log",function(){console.log.apply(console,arguments)}),a});